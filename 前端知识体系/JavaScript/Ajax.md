## 实现一个Ajax

通过实例化一个`XMLHttpRequest`对象得到一个实例，调用实例的`open`方法为这次`ajax`请求设定相应的`http`方法，相应的地址和是否异步，以异步为例，调用`send`方法，这个方法可以设定需要发送的报文主体，然后通过监听`readystatechange`事件，通过这个实例 的`readyState`属性来判断这个`ajax`请求状态，其中分为0，1，2，3，4这四种状态（0未初始化，1载入/正在发送请求，2载入完成/数据接收，3交互/解析数据，4接收数据完成），当状态为4的时候也就是接受数据完成的时候，这时候可以通过实例的status属性判断这个请求是否成功

步骤：

（1）设置请求参数（请求方式，请求页面的相对路径，是否异步）

（2）设置回调函数，一个处理服务器响应的函数

（3）获取异步对象的`readyState `属性：该属性存有服务器响应的状态信息。每当`readyState `改变时，`onreadystatechange` 函数就会被执行。

（4）判断响应报文的状态，若为200说明服务器正常运行并返回响应数据。

（5）读取响应数据，可以通过` responseText `属性来取回由服务器返回的数据



发出两个有顺序的`ajax`，可以用回调函数，也可以使用`Promise.then`或者`async`等

## Ajax返回的状态

0 － （未初始化）还没有调用`send()`方法

1 － （载入）已调用`send()`方法，正在发送请求

2 － （载入完成）`send()`方法执行完成，已经接收到全部响应内容

3 － （交互）正在解析响应内容

4 － （完成）响应内容解析完成，可以在客户端调用了

## Fetch和Ajax的比较

